<!DOCTYPE html>
<html>
<head>

  <title>Studio</title>
  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>-->
     <script src='aframe.min.js'></script>
	 
<link rel="icon" type="image/png" href="images/favicon.png">

 <style>
      *{
        cursor: url('images/cursor2.png'), auto;
      }
	  
#toggle-controls {
  position: absolute;
  top: 15px;
  right: 10px;
  z-index: 9999;
  background-color: #4CAF50;
  background-image: linear-gradient(to bottom right, #4CAF50, #2E8B57);
  border: 2px solid #2E8B57;
  padding: 10px 20px;
  font-size: 16px;
  border-radius: 30px;
  font-family: 'Open Sans', sans-serif;
  color: #fff;
  transition: all 0.3s ease-in-out;
  transform-style: preserve-3d;
  cursor: pointer;
  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.2), 0px 0px 10px 2px #4CAF50;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
}

#toggle-controls:hover {
  background-color: #3e8e41;
  transform: translateY(-2px) translateZ(0);
  box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.5), 0px 0px 20px 5px #4CAF50;
}

    </style>
	
	
	<script>
let controlsEnabled = true;
let obj;
 
 function initScene()
 {
	obj = document.getElementById('interactable-obj');
	
	//const button = document.getElementById("toggle-controls");


 }
 
 
 function clicked()
 {
	//button.addEventListener("click", function() {
  //console.log("patithike!");
  
	  if ( !controlsEnabled )
	  {
		controlsEnabled = true; 
		
		document.getElementById('player').setAttribute('wasd-controls', {enabled:'false'});
		document.getElementById('player').setAttribute('look-controls', {enabled:'false'});
	  }
	  else
	  {
		controlsEnabled = false; 
		document.getElementById('player').setAttribute('wasd-controls', {enabled:'true'});
		document.getElementById('player').setAttribute('look-controls', {enabled:'true'});
	  }
	  
		
	
 }
 
 

<!-- elegxos patimatos koumpiou -->


</script> 

	
</head>



<body>



<body oncontextmenu="return false;" onload="initScene();">


<button id="toggle-controls" onclick="clicked();">Enable</button>


 
 
<script>


    AFRAME.registerComponent('drag-rotate-component',{
      schema : { speed : {default:2.4}},
      init : function(){
        this.ifMouseDown = false;
        this.x_cord = 0;
        this.y_cord = 0;
        document.addEventListener('mousedown',this.OnDocumentMouseDown.bind(this));
        document.addEventListener('mouseup',this.OnDocumentMouseUp.bind(this));
        document.addEventListener('mousemove',this.OnDocumentMouseMove.bind(this));
      },
      OnDocumentMouseDown : function(event){
        this.ifMouseDown = true;
        this.x_cord = event.clientX;
        this.y_cord = event.clientY;
      },
      OnDocumentMouseUp : function(){
        this.ifMouseDown = false;
      },
      OnDocumentMouseMove : function(event)
      {
        if(this.ifMouseDown && controlsEnabled)
        {
          var temp_x = event.clientX-this.x_cord;
          var temp_y = event.clientY-this.y_cord;
          if(Math.abs(temp_y)<Math.abs(temp_x))
          {
            this.el.object3D.rotateY(temp_x*this.data.speed/1000);
          }
          
          this.x_cord = event.clientX;
          this.y_cord = event.clientY;
        }
      }
    });
	
	AFRAME.registerComponent('cameramove',{
      
      init : function(){
	  
		 document.addEventListener('wheel',this.OnWheel.bind(this));
        
      },
      OnWheel : function(event){
        
		let xyz = this.el.getAttribute('position');
		if (event.deltaY <0 )
		{
			xyz.z += .1; 
		}
		else
		{
			xyz.z -= 0.1;
		}
			
		//this.el.setAttribute('zvalue', z);
		this.el.setAttribute('position', xyz);
		console.log('z = ' + z);
      }
	  
	 
	  }
	  
	  );
	  	  
	  
	  AFRAME.registerComponent('zoom',{
	  

      
      init : function(){
	  
	    this.minScale = 0.9;
		this.maxScale = 1.8;
		
		 document.addEventListener('wheel',this.OnWheel.bind(this));
        
      },
      OnWheel : function(event){
	  
        console.log(event.deltaX + ", " + event.deltaY);
		let xyz = this.el.getAttribute('scale');
		
		if (event.deltaY <0 && xyz.x < this.maxScale && xyz.y < this.maxScale && xyz.z < this.maxScale)
		{
			xyz.x += 0.05;
			xyz.y += 0.05;
			xyz.z += 0.05;

		}
		else if(event.deltaY > 0 && xyz.x > this.minScale && xyz.y > this.minScale && xyz.z > this.minScale)
		{
			xyz.x -= 0.05;
			xyz.y -= 0.05;
			xyz.z -= 0.05;
		}
			
		this.el.setAttribute('scale', xyz);
		

		//this.el.setAttribute('position', '0 1 ' + z);
		//console.log('z = ' + z);
      }
	  
	 
	  }
	  
	  );
	  
	   AFRAME.registerShader('shader_blur', {
  schema: {
    color: {type: 'color', is: 'uniform'},
    timeMsec: {type: 'time', is: 'uniform'}
  },

  vertexShader: `
    varying vec2 vUv;
    void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
  `,
  fragmentShader: `
    varying vec2 vUv;
    uniform vec3 color;
    uniform float timeMsec; 

    void main() {
      float time = timeMsec / 1000.0; 
  
      vec3 col = vec3(1.0, 0.8, 0.4); 
      
      vec2 pos = vec2(vUv.x - 0.5, vUv.y - 0.5);
      float alpha = 0.7 - smoothstep(0.0, 0.1, length(pos));
      
      gl_FragColor = vec4(col, alpha);
    }
  `
});


AFRAME.registerComponent('zoom-poster', 
			{
				init: function()
				{


					this.el.addEventListener('mouseenter', 
						function(evt)
						{
							console.log("Mouse enter");
							//evt.detail.intersection.object.el.
							this.setAttribute('animation',{property: 'scale', to: '1.3 1.3 1.3', dur: 8000, easing: 'linear', loop: false});
						}
					);

					this.el.addEventListener('mouseleave', 
						function(evt)
						{
							console.log("Mouse leave");
							this.setAttribute('animation',{property: 'scale', to: '1 1 1', dur: 500, easing: 'linear', loop: false});
						}
					);
				}
			});



	
  </script>
  
  <a-scene id="my-scene">
   
   <a-camera id="player" position="0 6 17" cursor="rayOrigin:mouse;" zvalue="-3" look-controls="enabled:false" wasd-controls="enabled:false">
	</a-camera>
	
<a-assets>
  <audio id="music" src="sounds/generalsound.mp3" preload="auto" ></audio>
  <img id="gradient" src="images/gradient.png">
   <img id="sky" src="https://cdn.aframe.io/a-painter/images/sky.jpg"> <!-- ChatGpt(Prompt=Make a nicer sky)-->
</a-assets>

<a-entity sound="src:#music" volume="0.5"></a-entity>


<!-- Feggari -->
<a-sphere material="src:#moon; color: white; roughness: 1; metalness: 0.1"
          position="-180 135 -230"
          radius="10"
          animation="property: rotation; from: 0 0 0; to: 0 360 0; loop: true;  dur: 35000; easing:linear;">
    <a-img id="moon" src="images/moon.jpg"></a-img>
</a-sphere>


   <a-sky src="#sky" scale="1 1 1" position="0 20 0" animation="property: rotation; to: 0 30 0; dur: 95500; easing: easeOutCubic;" ></a-sky>

  <a-plane material="src:#gradient" position="0 0 0" rotation="-90 0 0" width="380" height="430" color="lightgrey" metalness="0.3">
  <a-text value="Drag my Studio to explore!" color="#004d39" align="center" position="-14 -3 2" scale="4.5 4.5 4.5" rotation="40 0 0" ></a-text>
  <a-text value="Scroll in it to zoom!" color="#008060" align="center" position="-10 -7 2" scale="3.5 3.5 3.5" rotation="40 0 0"></a-text>
   <a-text value="Enable the button to walk!" color="#009973" align="center" position="-8 -9.5 2" scale="2.5 2.5 2.5" rotation="40 0 0"></a-text>
</a-plane> 
	<a-assets>
    <a-asset-item id="Object" src="StudioModelWithoutFloor.glb" > </a-asset-item> 
	<a-asset-item id="Object2" src="StudioFloor.glb" > </a-asset-item> 
	</a-assets>
	<a-entity scale="1.15 1.15 1.15" id="interactable-obj"  gltf-model="#Object"  animation="property: rotation; to: 0 40 0; dur: 2500; easing: easeOutCubic;"  drag-rotate-component zoom>
	<a-entity gltf-model="#Object2" >
	
	<!-- Windows me emission-->
	
	  <a-plane src="#ground" 
               height="60" 
               width="50" 
               position="-3.1 4.4 3.5" 
               material="shader:shader_blur;"
               transparent="true"
               rotation="0 0 0">
      </a-plane>

	  <a-plane src="#ground" 
               height="50" 
               width="50" 
               position="0 4.4 3.6" 
               material="shader:shader_blur;"
               transparent="true"
               rotation="0 0 0">
      </a-plane>
	  
	    <a-plane src="#ground" 
               height="50" 
               width="50" 
               position="3.1 4.4 3.609" 
               material="shader:shader_blur;"
               transparent="true"
               rotation="0 0 15">
      </a-plane>
	  
	
	  
	  
	  
	  <!-- panw monitors -->
	 
      <a-plane animation="property: scale; startEvents: click; easing: easeOutElastic; to: 2.3 2.3 2.3" 
	           animation__2="property: position; startEvents: click; easing: easeOutElastic; to: -8.35 5 0" 
			   scale="1 1 1" position="-5.35 5.85 2.56" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane" 
	           ></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 5.85 0.84" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 5.85 -0.88" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 5.85 -2.57" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <!-- katw monitors -->
	  <a-plane scale="1 1 1" position="-5.35 2.86 2.56" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 2.86 0.84" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 2.86 -0.88" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	  <a-plane scale="1 1 1" position="-5.35 2.86 -2.57" rotation="0 -90 0" width="1.35" height="2.1" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	<!-- arcade -->
	 <a-plane scale="1 1 1" position="-3.5 4 -4.4" rotation="-30 -180 0" width="1.3" height="1.4" material="src: images/Pic1.jpg;" id="image-plane"></a-plane>
	 
	 
	 
	 
	
	
	
	</a-entity>
	
   
	
<a-light type="ambient" color="#fff" intensity="0.6" castShadow="true"></a-light>

<a-light type="ambient" color="#888" intensity="1.5" castShadow="true"></a-light>

  </a-scene>
  
</body>




</html>
